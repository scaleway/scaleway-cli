---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 109
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"id":"1c58dca0-da1e-4fc8-84d0-02c2264959be", "name":"test-cli-iam-delete-rule", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:48.708466Z", "updated_at":"2025-08-07T09:56:48.708466Z", "description":"", "qualification":null}'
        form: {}
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/account/v3/projects
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 266
        uncompressed: false
        body: '{"id":"1c58dca0-da1e-4fc8-84d0-02c2264959be", "name":"test-cli-iam-delete-rule", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:48.708466Z", "updated_at":"2025-08-07T09:56:48.708466Z", "description":"", "qualification":null}'
        headers:
            Content-Length:
                - "266"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:48 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - beb0bc19-a045-47bd-9241-594680aca033
        status: 200 OK
        code: 200
        duration: 397.351882ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 374
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"id":"06959a88-61dd-497b-9ae1-2d8001f51e98", "name":"test-cli-iam-delete-rule", "description":"", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:49.070167Z", "updated_at":"2025-08-07T09:56:49.070167Z", "editable":true, "deletable":true, "managed":false, "nb_rules":0, "nb_scopes":0, "nb_permission_sets":0, "tags":[], "no_principal":true}'
        form: {}
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/policies
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 381
        uncompressed: false
        body: '{"id":"06959a88-61dd-497b-9ae1-2d8001f51e98", "name":"test-cli-iam-delete-rule", "description":"", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:49.070167Z", "updated_at":"2025-08-07T09:56:49.070167Z", "editable":true, "deletable":true, "managed":false, "nb_rules":0, "nb_scopes":0, "nb_permission_sets":0, "tags":[], "no_principal":true}'
        headers:
            Content-Length:
                - "381"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 8869fe2c-319b-4ea2-ba9c-398b38b9172e
        status: 200 OK
        code: 200
        duration: 209.433528ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"id":"06959a88-61dd-497b-9ae1-2d8001f51e98", "name":"test-cli-iam-delete-rule", "description":"", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:49.070167Z", "updated_at":"2025-08-07T09:56:49.070167Z", "editable":true, "deletable":true, "managed":false, "nb_rules":2, "nb_scopes":1, "nb_permission_sets":2, "tags":[], "no_principal":true}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/policies/06959a88-61dd-497b-9ae1-2d8001f51e98
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 381
        uncompressed: false
        body: '{"id":"06959a88-61dd-497b-9ae1-2d8001f51e98", "name":"test-cli-iam-delete-rule", "description":"", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "created_at":"2025-08-07T09:56:49.070167Z", "updated_at":"2025-08-07T09:56:49.070167Z", "editable":true, "deletable":true, "managed":false, "nb_rules":2, "nb_scopes":1, "nb_permission_sets":2, "tags":[], "no_principal":true}'
        headers:
            Content-Length:
                - "381"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - f4af8ca0-b65d-4594-8597-b1fce80a148b
        status: 200 OK
        code: 200
        duration: 146.614355ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"rules":[{"id":"b0bb9559-1b71-4967-97ce-a636040a58e2", "permission_set_names":["IPAMReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}, {"id":"82a4ec52-32c6-4d16-9579-700629b26887", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}], "total_count":2}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/rules?page=1&policy_id=06959a88-61dd-497b-9ae1-2d8001f51e98
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 428
        uncompressed: false
        body: '{"rules":[{"id":"b0bb9559-1b71-4967-97ce-a636040a58e2", "permission_set_names":["IPAMReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}, {"id":"82a4ec52-32c6-4d16-9579-700629b26887", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}], "total_count":2}'
        headers:
            Content-Length:
                - "428"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 303aec3b-7361-4d92-ae70-ffa164bc338d
        status: 200 OK
        code: 200
        duration: 148.194572ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"rules":[{"id":"b0bb9559-1b71-4967-97ce-a636040a58e2", "permission_set_names":["IPAMReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}, {"id":"82a4ec52-32c6-4d16-9579-700629b26887", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}], "total_count":2}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/rules?page=1&policy_id=06959a88-61dd-497b-9ae1-2d8001f51e98
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 428
        uncompressed: false
        body: '{"rules":[{"id":"b0bb9559-1b71-4967-97ce-a636040a58e2", "permission_set_names":["IPAMReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}, {"id":"82a4ec52-32c6-4d16-9579-700629b26887", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}], "total_count":2}'
        headers:
            Content-Length:
                - "428"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 4e1c2ae4-070d-4cf0-894f-28d74232d94e
        status: 200 OK
        code: 200
        duration: 165.233247ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 173
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"rules":[{"id":"1bb58e2f-6651-4c50-894e-63952282f588", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}]}'
        form: {}
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/rules
        method: PUT
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 210
        uncompressed: false
        body: '{"rules":[{"id":"1bb58e2f-6651-4c50-894e-63952282f588", "permission_set_names":["VPCReadOnly"], "permission_sets_scope_type":"projects", "condition":"", "project_ids":["1c58dca0-da1e-4fc8-84d0-02c2264959be"]}]}'
        headers:
            Content-Length:
                - "210"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - c7988341-3da3-47a7-8ae4-98c7d51b0539
        status: 200 OK
        code: 200
        duration: 193.852061ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/policies/06959a88-61dd-497b-9ae1-2d8001f51e98
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 0
        uncompressed: false
        body: ""
        headers:
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:49 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - fba1d427-f915-431e-af50-4be088d2691d
        status: 204 No Content
        code: 204
        duration: 184.264203ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/account/v3/projects/1c58dca0-da1e-4fc8-84d0-02c2264959be
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 0
        uncompressed: false
        body: ""
        headers:
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Thu, 07 Aug 2025 09:56:51 GMT
            Server:
                - Scaleway API Gateway (fr-par-3;edge02)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - fe1fc901-c17f-43ef-ae33-131acdc241ce
        status: 204 No Content
        code: 204
        duration: 1.380519984s
